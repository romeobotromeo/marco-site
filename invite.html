<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You're Invited | Marco</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #000;
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
        }
        
        .loading {
            color: #888;
        }
        
        .error {
            color: #ff4444;
        }
        
        .error h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .error p {
            color: #888;
            margin-bottom: 30px;
        }
        
        .error a {
            color: #00ff88;
            text-decoration: none;
        }
        
        .success {
            max-width: 500px;
        }
        
        .badge {
            display: inline-block;
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }
        
        .success h1 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 15px;
        }
        
        .success .sub {
            color: #888;
            font-size: 18px;
            margin-bottom: 40px;
        }
        
        .phone-box {
            background: #111;
            border: 2px solid #00ff88;
            border-radius: 12px;
            padding: 30px 40px;
            margin-bottom: 30px;
        }
        
        .phone-label {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 10px;
        }
        
        .phone-number {
            font-size: 36px;
            font-weight: 800;
            color: #00ff88;
        }
        
        .phone-number a {
            color: inherit;
            text-decoration: none;
        }
        
        .cta-button {
            display: inline-block;
            background: #00ff88;
            color: #000;
            padding: 18px 48px;
            font-size: 18px;
            font-weight: 700;
            text-decoration: none;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.3);
        }
        
        .fine-print {
            margin-top: 30px;
            font-size: 13px;
            color: #555;
        }
        
        .fine-print a {
            color: #555;
        }
    </style>
</head>
<body>
    <div id="content" class="loading">
        Validating your invite...
    </div>
    
    <script>
        const code = window.location.pathname.split('/').pop();
        
        if (!code || code === 'invite' || code === 'invite.html') {
            showError('No invite code provided');
        } else {
            validateCode(code);
        }
        
        async function validateCode(code) {
            try {
                const response = await fetch(`https://marco-sms.onrender.com/invite/${code}`);
                const data = await response.json();
                
                if (data.valid) {
                    showSuccess(data);
                } else {
                    showError(data.reason === 'expired' 
                        ? 'This invite code has expired' 
                        : 'Invalid invite code');
                }
            } catch (err) {
                showError('Could not validate code. Try again?');
            }
        }
        
        function showSuccess(data) {
            document.getElementById('content').className = 'success';
            document.getElementById('content').innerHTML = `
                <div class="badge">üéâ ${data.benefit.toUpperCase()} ‚Äî INVITE CODE: ${data.code}</div>
                <h1>You're In.</h1>
                <p class="sub">Your friend hooked you up. Text Marco to get your site.</p>
                
                <div class="phone-box">
                    <div class="phone-label">Text this number</div>
                    <div class="phone-number"><a href="sms:+14158436766">(415) 843-6766</a></div>
                </div>
                
                <a href="sms:+14158436766" class="cta-button">Text Marco Now ‚Üí</a>
                
                <p class="fine-print">
                    By texting, you consent to receive SMS. Msg & data rates apply. Reply STOP to opt out.<br>
                    <a href="/privacy">Privacy</a> ¬∑ <a href="/terms">Terms</a>
                </p>
            `;
        }
        
        function showError(message) {
            document.getElementById('content').className = 'error';
            document.getElementById('content').innerHTML = `
                <h1>üòï</h1>
                <p>${message}</p>
                <a href="/">‚Üê Back to textmarco.com</a>
            `;
        }
    </script>
</body>
</html>
